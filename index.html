<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Grid Game</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* –°–ï–†–´–ô –î–ò–ó–ê–ô–ù –° –ß–ê–°–¢–ò–ß–ö–ê–ú–ò */
        body {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            font-family: 'Inter', 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            color: #e2e8f0;
            overflow: hidden;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
            height: 100dvh;
            position: relative;
        }

        /* –ß–∞—Å—Ç–∏—á–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ */
        #particles-js {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: 0;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å—Ç–µ–∫–ª–∞ - –¢–ï–ú–ù–´–ô –í–ê–†–ò–ê–ù–¢ */
        .glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .glass-light {
            background: rgba(51, 65, 85, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –∏–≥—Ä—ã */
        .game-container {
            width: 100%;
            max-width: 28rem;
            padding-left: 1rem;
            padding-right: 1rem;
            margin-left: auto;
            margin-right: auto;
        }

        /* –†–∞–º–∫–∞ –≤–æ–∫—Ä—É–≥ –ø–æ–ª—è —Å –Ω–µ–æ–Ω–æ–≤—ã–º —ç—Ñ—Ñ–µ–∫—Ç–æ–º - –ò–°–ü–†–ê–í–õ–ï–ù–ù–ê–Ø –í–ï–†–°–ò–Ø */
        .grid-frame {
            background: rgba(30, 41, 59, 0.8);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            border: 2px solid transparent;
            background-clip: padding-box;
        }

        /* –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±–æ—Ä–¥–µ—Ä - –†–ê–ë–û–ß–ê–Ø –í–ï–†–°–ò–Ø */
        .grid-frame::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: 22px;
            background: linear-gradient(45deg, 
                #475569, 
                #94a3b8, 
                #475569, 
                #94a3b8, 
                #475569);
            z-index: -1;
            opacity: 0.3;
            animation: borderGlow 3s ease-in-out infinite alternate;
        }

        @keyframes borderGlow {
            0% { 
                opacity: 0.2;
                background: linear-gradient(45deg, 
                    #475569, 
                    #94a3b8, 
                    #475569);
            }
            50% { 
                opacity: 0.4;
                background: linear-gradient(45deg, 
                    #94a3b8, 
                    #475569, 
                    #94a3b8);
            }
            100% { 
                opacity: 0.2;
                background: linear-gradient(45deg, 
                    #475569, 
                    #94a3b8, 
                    #475569);
            }
        }

        /* –°–µ—Ç–∫–∞ –∏–≥—Ä—ã */
        .game-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            width: 100%;
            perspective: 1000px;
        }

        /* –Ø–ß–ï–ô–ö–ò - –°–û–í–†–ï–ú–ï–ù–ù–´–ô –°–¢–ò–õ–¨ */
        .cell {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #334155, #1e293b);
            border-radius: 16px;
            cursor: pointer;
            position: relative;
            transform-style: preserve-3d;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            box-shadow: 
                0 4px 20px rgba(0, 0, 0, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            min-height: 50px;
        }

        .cell:hover:not(.locked) {
            transform: translateY(-2px);
            box-shadow: 
                0 6px 25px rgba(0, 0, 0, 0.4),
                inset 0 2px 0 rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.15);
        }

        /* –°—Ç–∏–ª—å –≤—ã–±—Ä–∞–Ω–Ω–æ–π —è—á–µ–π–∫–∏ */
        .cell.selected {
            background: linear-gradient(145deg, #475569, #334155);
            border-color: rgba(148, 163, 184, 0.5);
            box-shadow: 
                0 0 30px rgba(148, 163, 184, 0.3),
                inset 0 2px 0 rgba(255, 255, 255, 0.1);
            transform: scale(1.02);
        }
        
        .cell.selected::after {
            content: '–í–´–ë–†–ê–ù–û';
            position: absolute;
            top: -8px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            background: linear-gradient(90deg, #475569, #64748b);
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-weight: 800;
            white-space: nowrap;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            z-index: 2;
            text-transform: uppercase;
        }

        /* –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –≤—ã–±–æ—Ä–∞ */
        .cell.locked {
            cursor: not-allowed;
            opacity: 0.6;
            filter: grayscale(0.3);
        }

        .cell.flipped {
            transform: rotateY(180deg) scale(1.05);
        }

        .cell-front, .cell-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .cell-front {
            background: linear-gradient(145deg, #334155, #1e293b);
        }

        .cell-back {
            transform: rotateY(180deg);
            background: linear-gradient(145deg, #475569, #334155);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* –ü–∞—Ç—Ç–µ—Ä–Ω –Ω–∞ –∑–∞–¥–Ω–µ–π —Å—Ç–æ—Ä–æ–Ω–µ */
        .cell-back::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 30% 30%, rgba(148, 163, 184, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 70% 70%, rgba(100, 116, 139, 0.1) 0%, transparent 50%);
        }

        /* –ú–ò–ù–´ –ò –ì–ï–ú–´ */
        .mine { 
            color: #f87171; 
            font-size: 1.8rem !important;
            filter: drop-shadow(0 0 15px rgba(248, 113, 113, 0.4));
            text-shadow: 0 0 20px rgba(248, 113, 113, 0.5);
            animation: pulse 2s infinite;
        }

        .gem { 
            color: #34d399; 
            font-size: 1.8rem !important;
            filter: drop-shadow(0 0 15px rgba(52, 211, 153, 0.4));
            text-shadow: 0 0 20px rgba(52, 211, 153, 0.5);
            animation: float 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* –¢–∞–π–º–µ—Ä */
        .timer-bar-container {
            width: 100%;
            height: 8px;
            background: rgba(30, 41, 59, 0.7);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 12px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .timer-bar {
            height: 100%;
            background: linear-gradient(90deg, #60a5fa, #3b82f6);
            width: 100%;
            transition: width 0.1s linear;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.4);
            position: relative;
            overflow: hidden;
        }

        .timer-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.3), 
                transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .slide-up { 
            animation: slideUp 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
        }
        
        @keyframes slideUp {
            from { 
                transform: translateY(100%) scale(0.9);
                opacity: 0;
            }
            to { 
                transform: translateY(0) scale(1);
                opacity: 1;
            }
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .nav-container {
            padding-bottom: env(safe-area-inset-bottom);
            height: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: calc(100% - 2rem);
            max-width: 28rem;
            background: rgba(30, 41, 59, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 -4px 20px rgba(0, 0, 0, 0.4),
                0 1px 0 rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
        }
        
        .nav-btn {
            position: relative;
        }
        
        .nav-btn.active {
            color: #60a5fa;
        }
        
        .nav-btn.active i {
            transform: translateY(-4px);
            filter: drop-shadow(0 0 10px rgba(96, 165, 250, 0.4));
        }
        
        .nav-btn.active::after {
            content: '';
            position: absolute;
            bottom: 6px;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 4px;
            background: #60a5fa;
            border-radius: 50%;
            box-shadow: 0 0 8px rgba(96, 165, 250, 0.6);
        }
        
        .nav-btn i {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 18px;
        }
        
        .shake { 
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; 
        }
        
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç–∞–≤–æ–∫ */
        .result-win {
            color: #34d399;
            font-weight: bold;
        }
        
        .result-lose {
            color: #f87171;
            font-weight: bold;
        }
        
        .win-badge {
            background: linear-gradient(90deg, rgba(52, 211, 153, 0.15), rgba(52, 211, 153, 0.1));
            color: #34d399;
            border: 1px solid rgba(52, 211, 153, 0.3);
            font-size: 9px;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: 6px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .lose-badge {
            background: linear-gradient(90deg, rgba(248, 113, 113, 0.15), rgba(248, 113, 113, 0.1));
            color: #f87171;
            border: 1px solid rgba(248, 113, 113, 0.3);
            font-size: 9px;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: 6px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .pending-badge {
            background: linear-gradient(90deg, rgba(96, 165, 250, 0.15), rgba(96, 165, 250, 0.1));
            color: #93c5fd;
            border: 1px solid rgba(96, 165, 250, 0.3);
            font-size: 8px;
            padding: 3px 8px;
            border-radius: 6px;
            margin-left: 6px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        #otherBetsDisplay::-webkit-scrollbar {
            width: 5px;
        }
        
        #otherBetsDisplay::-webkit-scrollbar-track {
            background: rgba(30, 41, 59, 0.5);
            border-radius: 10px;
        }
        
        #otherBetsDisplay::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #475569, #64748b);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        #otherBetsDisplay::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #64748b, #94a3b8);
        }
        
        #otherBetsDisplay {
            scrollbar-width: thin;
            scrollbar-color: #475569 rgba(30, 41, 59, 0.5);
        }

        /* –°–¢–ò–õ–¨ –î–õ–Ø –°–¢–ê–í–û–ö –ò–ì–†–û–ö–û–í */
        .compact-bet {
            padding: 12px 16px;
            margin-bottom: 8px;
            border-radius: 14px;
            background: rgba(30, 41, 59, 0.7);
            border: 1px solid rgba(255, 255, 255, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            opacity: 0;
            transform: translateY(10px) scale(0.98);
            animation: slideInBet 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            position: relative;
            overflow: hidden;
        }
        
        /* –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ */
        .compact-bet:hover {
            background: rgba(30, 41, 59, 0.9);
            border-color: rgba(96, 165, 250, 0.3);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.4),
                0 0 20px rgba(96, 165, 250, 0.1);
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Å—Ç–∞–≤–æ–∫ */
        @keyframes slideInBet {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.98);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è —Å—Ç–∞–≤–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ */
        .bet-player {
            animation-delay: 0.1s;
            border-left: 3px solid #60a5fa;
        }
        
        .bet-bot {
            animation-delay: 0s;
            border-left: 3px solid #475569;
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞ */
        .compact-bet .user-icon {
            width: 32px;
            height: 32px;
            font-size: 14px;
            background: linear-gradient(135deg, #475569, #334155);
            color: #e2e8f0;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .compact-bet .user-info {
            flex: 1;
            margin-left: 12px;
            min-width: 0;
        }
        
        .compact-bet .user-name {
            font-size: 13px;
            color: #f1f5f9;
            font-weight: 600;
            display: flex;
            align-items: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            letter-spacing: 0.3px;
        }
        
        .compact-bet .cell-info {
            font-size: 11px;
            color: #94a3b8;
            margin-top: 3px;
            white-space: nowrap;
            font-weight: 500;
        }
        
        .compact-bet .bet-amount {
            font-size: 14px;
            font-weight: 700;
            color: #f8fafc;
            margin-left: 12px;
            text-align: right;
            white-space: nowrap;
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8), rgba(51, 65, 85, 0.8));
            padding: 6px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            min-width: 70px;
            box-shadow: 
                inset 0 1px 0 rgba(255, 255, 255, 0.05),
                0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        .compact-bet.player-bet .bet-amount {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(37, 99, 235, 0.2));
            border-color: rgba(59, 130, 246, 0.3);
            color: #93c5fd;
        }

        /* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –†–ï–ó–£–õ–¨–¢–ê–¢–ê */
        #resultModal .modal-content {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.95), rgba(15, 23, 42, 0.95));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(59, 130, 246, 0.2);
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç –ø–∞—Ä–∞–ª–ª–∞–∫—Å–∞ –¥–ª—è —Å–µ–∫—Ü–∏–π */
        .game-section {
            position: relative;
            z-index: 10;
        }

        /* –ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç: –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ–Ω–ª–∞–π–Ω –∏–≥—Ä–æ–∫–æ–≤ */
        .online-indicator {
            position: relative;
            display: inline-block;
        }
        
        .online-indicator::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            background: #34d399;
            border-radius: 50%;
            box-shadow: 0 0 10px #34d399;
            animation: blink 2s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ */
        .error-message {
            position: fixed;
            top: 20%;
            left: 50%;
            transform: translateX(-50%) translateY(-20px);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.9), rgba(220, 38, 38, 0.9));
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(239, 68, 68, 0.3);
        }
        
        .error-message.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }

        .error-message i {
            margin-right: 8px;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –æ—Ç—Å—Ç—É–ø—ã */
        @media (max-width: 640px) {
            .game-container {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }
            
            .nav-container {
                width: calc(100% - 3rem);
            }
            
            .cell {
                min-height: 45px;
                font-size: 14px;
            }
            
            .mine, .gem {
                font-size: 1.6rem !important;
            }
            
            .compact-bet .bet-amount {
                font-size: 13px;
                min-width: 65px;
                padding: 5px 10px;
            }
            
            .error-message {
                width: 90%;
                max-width: 300px;
                text-align: center;
                top: 15%;
            }
        }

        @media (max-width: 380px) {
            .game-container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            
            .nav-container {
                width: calc(100% - 2rem);
            }
            
            .cell {
                min-height: 40px;
                font-size: 12px;
            }
            
            .mine, .gem {
                font-size: 1.4rem !important;
            }
            
            .compact-bet {
                padding: 10px 12px;
            }
            
            .compact-bet .bet-amount {
                font-size: 12px;
                min-width: 60px;
                padding: 4px 8px;
            }
        }

        /* –î–ª—è –ü–ö */
        @media (min-width: 768px) {
            .game-container {
                padding-left: 0;
                padding-right: 0;
            }
            
            .cell {
                min-height: 60px;
                font-size: 18px;
            }
            
            .mine, .gem {
                font-size: 2rem !important;
            }
            
            .grid-frame {
                padding: 24px;
            }
            
            .game-grid {
                gap: 16px;
            }
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è –¥–ª—è –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .glow {
            filter: drop-shadow(0 0 15px currentColor);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–π –∏–≥—Ä—ã */
        @keyframes newGamePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .new-game {
            animation: newGamePulse 0.5s ease-out;
        }

        /* –≠—Ñ—Ñ–µ–∫—Ç —á–∞—Å—Ç–∏—Ü –≤ —è—á–µ–π–∫–∞—Ö –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ */
        .cell.win-particle::before {
            content: '';
            position: absolute;
            top: -10px;
            left: -10px;
            right: -10px;
            bottom: -10px;
            background: radial-gradient(circle, rgba(52, 211, 153, 0.1) 0%, transparent 70%);
            z-index: 1;
            animation: expand 0.5s ease-out forwards;
        }

        @keyframes expand {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        
        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –∏ –¥—Ä—É–≥–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ */
        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }
        
        .animate-shimmer {
            animation: shimmer 2s infinite;
        }
        
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .animate-spin-slow {
            animation: spin-slow 10s linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh) rotate(720deg);
                opacity: 0;
            }
        }
    </style>
</head>
<body class="flex flex-col relative">
    
    <!-- –ß–∞—Å—Ç–∏—á–∫–∏ –Ω–∞ —Ñ–æ–Ω–µ -->
    <div id="particles-js"></div>

    <!-- –í–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å -->
    <header class="p-4 flex justify-between items-center z-10 glass m-4 rounded-2xl shrink-0 mx-4 md:mx-auto md:max-w-2xl relative overflow-hidden">
        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ–Ω –ø–∞–Ω–µ–ª–∏ -->
        <div class="absolute inset-0 bg-gradient-to-r from-transparent via-blue-500/5 to-transparent animate-shimmer"></div>
        
        <div class="font-bold text-lg tracking-tight flex items-center gap-3 text-white relative z-10">
            <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/30 relative overflow-hidden">
                <i class="fas fa-th text-white text-base"></i>
                <!-- –ê–Ω–∏–º–∞—Ü–∏—è —Å–≤–µ—á–µ–Ω–∏—è -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
            </div>
            <div class="flex flex-col">
                <span class="text-white text-sm font-bold">TON GRID</span>
                <span class="text-blue-300 text-xs font-medium">Risk & Reward</span>
            </div>
        </div>
        
        <div class="flex items-center gap-3 relative z-10">
            <div class="flex flex-col items-end">
                <div class="text-white font-mono font-bold text-base" id="balanceDisplay">100.00</div>
                <div class="text-blue-300 text-xs">–ë–∞–ª–∞–Ω—Å</div>
            </div>
            <div class="w-10 h-10 bg-gradient-to-br from-blue-600 to-blue-700 rounded-xl flex items-center justify-center text-base font-bold text-white shadow-lg shadow-blue-500/30">
                <i class="fab fa-telegram"></i>
            </div>
        </div>
    </header>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ -->
    <div id="errorMessage" class="error-message">
        <i class="fas fa-exclamation-circle"></i>
        <span id="errorText">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —è—á–µ–π–∫—É –¥–ª—è —Å—Ç–∞–≤–∫–∏</span>
    </div>

    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="flex-1 overflow-y-auto pb-20 relative z-10">
        
        <!-- –°–ï–ö–¶–ò–Ø –ò–ì–†–´ -->
        <main id="gameSection" class="flex flex-col items-center justify-start pt-2 transition-opacity duration-300 min-h-full game-section">
            
            <div class="game-container flex flex-col items-center">
                
                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞—É–Ω–¥–∞ -->
                <div class="w-full flex justify-between items-center mb-4 px-2">
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-blue-500/10 flex items-center justify-center">
                            <i class="fas fa-users text-blue-400 text-sm"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-blue-300 text-xs font-semibold">–ò–≥—Ä–æ–∫–æ–≤ –æ–Ω–ª–∞–π–Ω</span>
                            <span class="text-white text-sm font-bold" id="onlineCount">8</span>
                        </div>
                    </div>
                    
                    <div class="flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center">
                            <i class="fas fa-trophy text-emerald-400 text-sm"></i>
                        </div>
                        <div class="flex flex-col items-end">
                            <span class="text-emerald-300 text-xs font-semibold">–î–∂–µ–∫–ø–æ—Ç</span>
                            <span class="text-white text-sm font-bold" id="jackpotAmount">0.00</span>
                        </div>
                    </div>
                </div>

                <!-- –¢–∞–π–º–µ—Ä -->
                <div class="w-full mb-3 flex justify-between text-xs font-bold uppercase tracking-wider">
                    <span id="statusText" class="text-blue-300 flex items-center gap-2">
                        <i class="fas fa-clock animate-pulse"></i>
                        –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫
                    </span>
                    <span id="timerText" class="font-mono text-white bg-blue-500/10 px-3 py-1 rounded-lg border border-blue-500/20">
                        10.0
                    </span>
                </div>
                <div class="timer-bar-container w-full">
                    <div id="timerBar" class="timer-bar"></div>
                </div>

                <!-- –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ -->
                <div class="grid-frame">
                    <div class="game-grid" id="grid">
                        <!-- –Ø—á–µ–π–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è JS -->
                    </div>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∞ —Å—Ç–∞–≤–∫–∏ -->
                <button id="openBetBtn" onclick="openBetModal()" class="w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold py-3.5 rounded-xl shadow-xl shadow-blue-500/30 transition-all duration-300 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 flex items-center justify-center gap-3 text-sm mt-4 group relative overflow-hidden">
                    <!-- –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è -->
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent group-hover:animate-shimmer"></div>
                    <i class="fas fa-coins text-yellow-300 group-hover:rotate-12 transition-transform"></i>
                    <span class="font-bold tracking-wide">–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£</span>
                    <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
                </button>

                <!-- –°–¢–ê–í–ö–ò –ò–ì–†–û–ö–û–í -->
                <div class="mt-6 mb-4 w-full">
                    <div class="flex items-center justify-between mb-4 px-1">
                        <h4 class="text-sm font-bold text-white flex items-center gap-2">
                            <div class="online-indicator">
                                <i class="fas fa-bolt text-yellow-400 text-sm"></i>
                            </div>
                            –ê–ö–¢–ò–í–ù–´–ï –°–¢–ê–í–ö–ò
                        </h4>
                        <div class="text-xs text-blue-300 bg-blue-500/10 px-3 py-1 rounded-full border border-blue-500/20">
                            <span id="activeBetsCount">0</span> –∏–∑ 9
                        </div>
                    </div>
                    <div id="otherBetsDisplay" class="w-full space-y-3 max-h-64 overflow-y-auto pr-2 compact-bets-container">
                        <!-- –≠–ª–µ–º–µ–Ω—Ç—ã —Å—Ç–∞–≤–æ–∫ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è —Å—é–¥–∞ JS -->
                    </div>
                </div>

            </div>
        </main>

        <!-- –°–ï–ö–¶–ò–Ø –ü–†–û–§–ò–õ–Ø -->
        <main id="profileSection" class="hidden flex flex-col items-center justify-center pt-8 px-4 md:px-0 md:max-w-2xl md:mx-auto transition-opacity duration-300 game-section">
            <div class="relative mb-6">
                <div class="w-24 h-24 bg-gradient-to-tr from-blue-500 via-blue-600 to-blue-700 rounded-full flex items-center justify-center text-3xl shadow-2xl shadow-blue-500/30 relative overflow-hidden">
                    <i class="fas fa-crown text-white"></i>
                    <!-- –≠—Ñ—Ñ–µ–∫—Ç —Å–∏—è–Ω–∏—è -->
                    <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-spin-slow"></div>
                </div>
                <div class="absolute bottom-2 right-2 w-8 h-8 bg-emerald-500 rounded-full border-3 border-gray-900 shadow-lg shadow-emerald-500/30 flex items-center justify-center">
                    <i class="fas fa-check text-xs text-white"></i>
                </div>
            </div>
            
            <h2 class="text-xl font-bold mb-2 text-white">Player_One</h2>
            <p class="text-blue-300 text-xs font-mono mb-8 bg-blue-500/10 px-4 py-2 rounded-full border border-blue-500/20 backdrop-blur-sm">
                <i class="fas fa-id-card mr-2"></i>
                ID: #8839201
            </p>

            <div class="w-full max-w-[380px] space-y-4">
                <div class="glass p-5 rounded-2xl flex justify-between items-center group hover:bg-gray-800/40 transition-all duration-300 cursor-pointer border border-gray-700/50 hover:border-blue-500/30">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-pink-500/20 to-purple-500/20 flex items-center justify-center text-pink-400 border border-pink-500/30">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-gray-300 text-sm font-medium">–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
                            <span class="text-gray-400 text-xs">–ë—É—Å—Ç–µ—Ä—ã –∏ –±–æ–Ω—É—Å—ã</span>
                        </div>
                    </div>
                    <span class="font-bold text-white bg-gradient-to-r from-pink-500/20 to-purple-500/20 px-4 py-2 rounded-lg text-sm border border-pink-500/30" id="giftCountDisplay">3</span>
                </div>
                
                <div class="glass p-5 rounded-2xl flex justify-between items-center group hover:bg-gray-800/40 transition-all duration-300 cursor-pointer border border-gray-700/50 hover:border-blue-500/30">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-500/20 to-cyan-500/20 flex items-center justify-center text-blue-400 border border-blue-500/30">
                            <i class="fas fa-history"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-gray-300 text-sm font-medium">–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä</span>
                            <span class="text-gray-400 text-xs">–ü–æ—Å–ª–µ–¥–Ω–∏–µ 50 –∏–≥—Ä</span>
                        </div>
                    </div>
                    <span class="font-bold text-white bg-gradient-to-r from-blue-500/20 to-cyan-500/20 px-4 py-2 rounded-lg text-sm border border-blue-500/30">142</span>
                </div>

                <div class="glass p-5 rounded-2xl flex justify-between items-center group hover:bg-gray-800/40 transition-all duration-300 cursor-pointer border border-gray-700/50 hover:border-blue-500/30">
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-green-500/20 flex items-center justify-center text-emerald-400 border border-emerald-500/30">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <div class="flex flex-col">
                            <span class="text-gray-300 text-sm font-medium">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                            <span class="text-gray-400 text-xs">–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–±–µ–¥</span>
                        </div>
                    </div>
                    <span class="font-bold text-white bg-gradient-to-r from-emerald-500/20 to-green-500/20 px-4 py-2 rounded-lg text-sm border border-emerald-500/30">54.2%</span>
                </div>

                <!-- –î–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
                <div class="glass p-5 rounded-2xl mt-6 border border-gray-700/50">
                    <h3 class="text-sm font-bold text-white mb-4 flex items-center gap-2">
                        <i class="fas fa-trophy text-yellow-400"></i>
                        –î–û–°–¢–ò–ñ–ï–ù–ò–Ø
                    </h3>
                    <div class="grid grid-cols-3 gap-3">
                        <div class="bg-gray-800/40 rounded-xl p-3 flex flex-col items-center justify-center border border-gray-700/50 hover:border-yellow-500/30 transition-colors">
                            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-yellow-500/20 to-orange-500/20 flex items-center justify-center text-yellow-400 mb-2">
                                <i class="fas fa-rocket"></i>
                            </div>
                            <span class="text-xs text-gray-300 text-center">–ù–æ–≤–∏—á–æ–∫</span>
                        </div>
                        <div class="bg-gray-800/40 rounded-xl p-3 flex flex-col items-center justify-center border border-gray-700/50 hover:border-yellow-500/30 transition-colors">
                            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-500/20 to-cyan-500/20 flex items-center justify-center text-blue-400 mb-2">
                                <i class="fas fa-bolt"></i>
                            </div>
                            <span class="text-xs text-gray-300 text-center">–°—Ç—Ä–∞—Ç–µ–≥</span>
                        </div>
                        <div class="bg-gray-800/40 rounded-xl p-3 flex flex-col items-center justify-center border border-gray-700/50 hover:border-yellow-500/30 transition-colors">
                            <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center text-purple-400 mb-2">
                                <i class="fas fa-crown"></i>
                            </div>
                            <span class="text-xs text-gray-300 text-center">–ü–æ–±–µ–¥–∏—Ç–µ–ª—å</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <nav class="fixed bottom-4 h-14 glass rounded-2xl flex justify-around items-center z-40 nav-container">
        <button onclick="switchTab('game')" class="nav-btn active flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-blue-400 transition-all duration-300 group" id="navGame">
            <div class="relative">
                <i class="fas fa-gamepad text-lg mb-1 group-hover:scale-110 transition-transform"></i>
                <div class="absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></div>
            </div>
            <span class="text-[10px] font-bold tracking-wide">–ò–≥—Ä–∞</span>
        </button>
        <button onclick="switchTab('profile')" class="nav-btn flex flex-col items-center justify-center w-full h-full text-gray-400 hover:text-blue-400 transition-all duration-300 group" id="navProfile">
            <div class="relative">
                <i class="fas fa-user text-lg mb-1 group-hover:scale-110 transition-transform"></i>
                <div class="absolute -top-1 -right-1 w-2 h-2 bg-blue-500 rounded-full opacity-0 group-hover:opacity-100 transition-opacity"></div>
            </div>
            <span class="text-[10px] font-bold tracking-wide">–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
        <div class="absolute top-0 left-0 w-1/2 h-full bg-gradient-to-r from-blue-500/10 to-transparent rounded-2xl transition-transform duration-300" id="navSlider"></div>
    </nav>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –°—Ç–∞–≤–∫–∞ -->
    <div id="betModal" class="fixed inset-0 z-50 bg-black/60 backdrop-blur-md hidden flex items-end justify-center sm:items-center">
        <div class="glass w-full max-w-[420px] rounded-t-3xl sm:rounded-3xl p-6 slide-up border-t sm:border border-gray-700/50 shadow-2xl relative overflow-hidden">
            
            <!-- –î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
            <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500"></div>
            <div class="w-12 h-1.5 bg-gray-600 rounded-full mx-auto mb-6 sm:hidden"></div>

            <div class="flex justify-between items-center mb-6 relative z-10">
                <div class="flex flex-col">
                    <h3 class="text-lg font-bold text-white">–°—É–º–º–∞ —Å—Ç–∞–≤–∫–∏</h3>
                    <p class="text-gray-400 text-xs">–ú–∏–Ω. 0.1 TON | –ú–∞–∫—Å. 100 TON</p>
                </div>
                <button onclick="closeBetModal()" class="w-9 h-9 rounded-xl bg-gray-800/50 flex items-center justify-center text-gray-400 hover:text-white hover:bg-gray-700/50 transition-all duration-200 border border-gray-700/50">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- –¢–∞–±—ã -->
            <div class="flex bg-gray-900/50 rounded-xl p-1 mb-6 border border-gray-700/50">
                <button onclick="setBetType('TON')" id="tabTon" class="flex-1 py-3.5 rounded-lg bg-gradient-to-r from-blue-600 to-blue-500 text-white text-sm font-bold transition-all shadow-lg shadow-blue-500/30 flex items-center justify-center gap-2">
                    <i class="fas fa-coins"></i>
                    TON (x1.45)
                </button>
                <button onclick="setBetType('GIFT')" id="tabGift" class="flex-1 py-3.5 rounded-lg text-gray-400 text-sm font-bold hover:text-white transition-all flex items-center justify-center gap-2">
                    <i class="fas fa-gift"></i>
                    –ü–æ–¥–∞—Ä–æ–∫ (x1.5)
                </button>
            </div>

            <!-- –í–≤–æ–¥ —Å—É–º–º—ã (TON) -->
            <div id="inputSectionTON">
                <div class="relative mb-5">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <span class="text-blue-400 font-bold text-sm bg-blue-500/10 px-3 py-1.5 rounded-lg border border-blue-500/20">TON</span>
                    </div>
                    <input type="number" id="betAmountInput" class="w-full bg-gray-900/50 rounded-2xl py-5 pl-24 pr-4 text-2xl font-bold text-white outline-none border border-gray-700/50 focus:border-blue-500/50 transition-all duration-300 focus:shadow-lg focus:shadow-blue-500/10 backdrop-blur-sm" placeholder="0.00" value="10" step="0.1">
                    <div class="absolute inset-y-0 right-0 pr-4 flex items-center pointer-events-none">
                        <i class="fas fa-wallet text-gray-500"></i>
                    </div>
                </div>
                
                <div class="grid grid-cols-4 gap-3 mb-6">
                    <button onclick="adjustBet(5)" class="bg-gray-800/50 hover:bg-gray-700/50 py-3 rounded-xl text-sm font-bold text-gray-300 hover:text-white transition-all duration-200 border border-gray-700/50 hover:border-blue-500/30 active:scale-95">+5</button>
                    <button onclick="adjustBet(10)" class="bg-gray-800/50 hover:bg-gray-700/50 py-3 rounded-xl text-sm font-bold text-gray-300 hover:text-white transition-all duration-200 border border-gray-700/50 hover:border-blue-500/30 active:scale-95">+10</button>
                    <button onclick="adjustBet(25)" class="bg-gray-800/50 hover:bg-gray-700/50 py-3 rounded-xl text-sm font-bold text-gray-300 hover:text-white transition-all duration-200 border border-gray-700/50 hover:border-blue-500/30 active:scale-95">+25</button>
                    <button onclick="setMaxBet()" class="bg-gradient-to-r from-blue-500/20 to-blue-600/20 hover:from-blue-500/30 hover:to-blue-600/30 py-3 rounded-xl text-sm font-bold text-blue-300 hover:text-white transition-all duration-200 border border-blue-500/30 hover:border-blue-400/50 active:scale-95 flex items-center justify-center gap-1">
                        <i class="fas fa-maximize text-xs"></i>
                        MAX
                    </button>
                </div>
            </div>

            <!-- –°–µ–∫—Ü–∏—è –ø–æ–¥–∞—Ä–∫–∞ -->
            <div id="inputSectionGIFT" class="hidden text-center py-8 mb-6 bg-gradient-to-br from-pink-500/10 to-purple-500/10 rounded-2xl border-2 border-dashed border-gray-700/50 relative overflow-hidden">
                <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã -->
                <div class="absolute top-0 left-0 w-20 h-20 bg-gradient-to-br from-pink-500/5 to-transparent rounded-full -translate-x-10 -translate-y-10"></div>
                <div class="absolute bottom-0 right-0 w-20 h-20 bg-gradient-to-br from-purple-500/5 to-transparent rounded-full translate-x-10 translate-y-10"></div>
                
                <div class="text-6xl mb-4 animate-bounce relative z-10">üéÅ</div>
                <p class="text-sm text-gray-300 relative z-10">
                    –î–æ—Å—Ç—É–ø–Ω–æ: <span id="modalGiftCount" class="text-pink-400 font-bold text-lg">3</span> —à—Ç.
                </p>
                <p class="text-xs text-gray-400 mt-2 relative z-10">–ë—É–¥–µ—Ç —Å–ø–∏—Å–∞–Ω 1 –ø–æ–¥–∞—Ä–æ–∫ –∑–∞ —Ä–∞—É–Ω–¥</p>
                <div class="mt-4 flex items-center justify-center gap-2 text-xs text-gray-500">
                    <i class="fas fa-info-circle"></i>
                    <span>–ü–æ–¥–∞—Ä–∫–∏ –Ω–µ–ª—å–∑—è —Ä–∞–∑–¥–µ–ª–∏—Ç—å</span>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç–∞–≤–∫–∏ -->
            <div class="glass-light rounded-xl p-4 mb-6">
                <div class="flex justify-between items-center mb-3">
                    <span class="text-gray-400 text-sm">–í–æ–∑–º–æ–∂–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à:</span>
                    <span id="potentialWin" class="text-emerald-400 font-bold text-lg">14.50 TON</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-400 text-sm">–®–∞–Ω—Å –≤—ã–∏–≥—Ä—ã—à–∞:</span>
                    <span class="text-blue-400 font-bold">88.9%</span>
                </div>
            </div>

            <button onclick="placeBet()" class="w-full bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-500 hover:to-emerald-400 text-white font-bold py-4 rounded-xl shadow-xl shadow-emerald-500/30 active:scale-[0.98] transition-all duration-300 flex items-center justify-center gap-3 group relative overflow-hidden">
                <!-- –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent group-hover:animate-shimmer"></div>
                <i class="fas fa-lock-open group-hover:rotate-12 transition-transform"></i>
                <span class="font-bold tracking-wide">–ü–û–î–¢–í–ï–†–î–ò–¢–¨ –°–¢–ê–í–ö–£</span>
                <i class="fas fa-arrow-right group-hover:translate-x-1 transition-transform"></i>
            </button>

            <!-- –†–∏—Å–∫-–¥–∏—Å–ø–ª–µ–π -->
            <div class="mt-4 text-center">
                <div class="inline-flex items-center gap-2 text-xs text-gray-500 bg-gray-900/30 px-4 py-2 rounded-full border border-gray-700/50">
                    <i class="fas fa-exclamation-triangle text-yellow-500"></i>
                    <span>–í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ √ó –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä–∞–¥–∞</span>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: –†–µ–∑—É–ª—å—Ç–∞—Ç -->
    <div id="resultModal" class="fixed inset-0 z-50 flex items-center justify-center pointer-events-none opacity-0 transition-opacity duration-300 px-4">
        <div class="modal-content px-8 py-10 rounded-[32px] shadow-2xl transform scale-90 transition-transform duration-300 text-center w-full max-w-[320px]" id="resultContent">
            <!-- –§–æ–Ω —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º -->
            <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900"></div>
            <!-- –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è -->
            <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent animate-shimmer"></div>
            
            <div id="resultIcon" class="text-7xl mb-6 relative z-10"></div>
            <h2 id="resultTitle" class="text-3xl font-black mb-4 relative z-10 tracking-tight"></h2>
            <div id="resultSubtitle" class="text-gray-200 font-bold text-xl bg-gradient-to-r from-gray-800/50 to-gray-900/50 py-4 px-8 rounded-2xl inline-block border border-gray-700/50 relative z-10 backdrop-blur-sm"></div>
            
            <!-- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –ø–æ–±–µ–¥–µ -->
            <div id="confettiContainer" class="absolute inset-0 pointer-events-none"></div>
        </div>
    </div>

    <!-- –°–∫—Ä–∏–ø—Ç –¥–ª—è —á–∞—Å—Ç–∏—Ü -->
    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–∞—Å—Ç–∏—Ü –Ω–∞ —Ñ–æ–Ω–µ
        document.addEventListener('DOMContentLoaded', function() {
            particlesJS('particles-js', {
                particles: {
                    number: {
                        value: 80,
                        density: {
                            enable: true,
                            value_area: 800
                        }
                    },
                    color: {
                        value: "#94a3b8"
                    },
                    shape: {
                        type: "circle",
                        stroke: {
                            width: 0,
                            color: "#000000"
                        }
                    },
                    opacity: {
                        value: 0.3,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 1,
                            opacity_min: 0.1,
                            sync: false
                        }
                    },
                    size: {
                        value: 3,
                        random: true,
                        anim: {
                            enable: true,
                            speed: 2,
                            size_min: 0.5,
                            sync: false
                        }
                    },
                    line_linked: {
                        enable: true,
                        distance: 150,
                        color: "#475569",
                        opacity: 0.2,
                        width: 1
                    },
                    move: {
                        enable: true,
                        speed: 1,
                        direction: "none",
                        random: true,
                        straight: false,
                        out_mode: "out",
                        bounce: false,
                        attract: {
                            enable: false,
                            rotateX: 600,
                            rotateY: 1200
                        }
                    }
                },
                interactivity: {
                    detect_on: "canvas",
                    events: {
                        onhover: {
                            enable: true,
                            mode: "repulse"
                        },
                        onclick: {
                            enable: true,
                            mode: "push"
                        },
                        resize: true
                    }
                },
                retina_detect: true
            });
        });
    </script>

    <script>
        // --- –°–û–°–¢–û–Ø–ù–ò–ï –ò–ì–†–´ ---
        let balance = 100.00;
        let gifts = 3;
        
        const ROUND_TIME = 10;
        let currentTime = ROUND_TIME;
        let gameInterval;
        let isBettingOpen = true;
        
        let selectedCellIndex = null; 
        
        let currentBet = {
            active: false,
            type: 'TON', 
            amount: 0
        };
        
        const MOCK_PLAYERS = ['CryptoKing', 'TONMaster', 'JaneDoe', 'Bot_2024', 'AnonUser', 'TheWhale', 'SpeedyGonzales', 'LuckySeven'];
        let mockBets = [];
        let currentRoundResultIndex = null;
        let botBetInterval;
        let botsAdded = 0;
        const MAX_BOTS = 8;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        const els = {
            balance: document.getElementById('balanceDisplay'),
            grid: document.getElementById('grid'),
            timerBar: document.getElementById('timerBar'),
            timerText: document.getElementById('timerText'),
            statusText: document.getElementById('statusText'),
            betBtn: document.getElementById('openBetBtn'),
            betModal: document.getElementById('betModal'),
            betAmountInput: document.getElementById('betAmountInput'),
            tabTon: document.getElementById('tabTon'),
            tabGift: document.getElementById('tabGift'),
            inputTon: document.getElementById('inputSectionTON'),
            inputGift: document.getElementById('inputSectionGIFT'),
            resultModal: document.getElementById('resultModal'),
            resultContent: document.getElementById('resultContent'),
            giftCountDisplay: document.getElementById('giftCountDisplay'),
            modalGiftCount: document.getElementById('modalGiftCount'),
            otherBetsDisplay: document.getElementById('otherBetsDisplay'),
            onlineCount: document.getElementById('onlineCount'),
            activeBetsCount: document.getElementById('activeBetsCount'),
            potentialWin: document.getElementById('potentialWin'),
            jackpotAmount: document.getElementById('jackpotAmount'),
            errorMessage: document.getElementById('errorMessage'),
            errorText: document.getElementById('errorText'),
            resultIcon: document.getElementById('resultIcon'),
            resultTitle: document.getElementById('resultTitle'),
            resultSubtitle: document.getElementById('resultSubtitle')
        };

        // –§–ª–∞–≥ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
        let resultShown = false;
        let maxWinThisRound = 0; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à –≤ —Ç–µ–∫—É—â–µ–º —Ä–∞—É–Ω–¥–µ (–¥–ª—è –¥–∂–µ–∫–ø–æ—Ç–∞)

        function init() {
            createGrid();
            updateBalanceUI();
            setBetType('TON'); 
            startGameLoop();
            updatePotentialWin();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –≤–≤–æ–¥ —Å—É–º–º—ã –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏
            if (els.betAmountInput) {
                els.betAmountInput.addEventListener('input', updatePotentialWin);
            }
        }

        function updatePotentialWin() {
            if (!els.potentialWin) return;
            const amount = parseFloat(els.betAmountInput.value) || 0;
            const multiplier = currentBet.type === 'TON' ? 1.45 : 1.5;
            const potential = amount * multiplier;
            els.potentialWin.textContent = `${potential.toFixed(2)} TON`;
            
            updateActiveBetsCount();
        }

        function updateActiveBetsCount() {
            if (!els.activeBetsCount || !els.onlineCount) return;
            const activeCount = mockBets.length;
            els.activeBetsCount.textContent = activeCount;
            els.onlineCount.textContent = Math.min(activeCount + 2, 99);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∂–µ–∫–ø–æ—Ç –∫–∞–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å—Ç–∞–≤–æ–∫
            updateJackpot();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∂–µ–∫–ø–æ—Ç–∞ –∫–∞–∫ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤—ã–∏–≥—Ä—ã—à–∞
        function updateJackpot() {
            if (!els.jackpotAmount) return;
            
            // –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç–∞–≤–∫–∏
            let maxWin = 0;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞–≤–∫–∏ –∏–≥—Ä–æ–∫–æ–≤
            mockBets.forEach(bet => {
                if (bet.amount) {
                    let amount = 0;
                    if (typeof bet.amount === 'string') {
                        if (bet.amount.includes('TON')) {
                            amount = parseFloat(bet.amount) || 0;
                        } else if (bet.amount.includes('üéÅ')) {
                            amount = 15; // –ü–æ–¥–∞—Ä–æ–∫ –¥–∞–µ—Ç 15 TON –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ
                        }
                    }
                    
                    const multiplier = bet.amount.includes('üéÅ') ? 1.5 : 1.45;
                    const potentialWin = amount * multiplier;
                    if (potentialWin > maxWin) {
                        maxWin = potentialWin;
                    }
                }
            });
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à —Ç–µ–∫—É—â–µ–≥–æ —Ä–∞—É–Ω–¥–∞
            maxWinThisRound = maxWin;
            
            // –ï—Å–ª–∏ –µ—Å—Ç—å —Ç–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞ –∏–≥—Ä–æ–∫–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ–µ —Ç–æ–∂–µ
            if (currentBet.active && currentBet.amount > 0) {
                const multiplier = currentBet.type === 'TON' ? 1.45 : 1.5;
                const playerPotentialWin = currentBet.amount * multiplier;
                if (playerPotentialWin > maxWin) {
                    maxWin = playerPotentialWin;
                    maxWinThisRound = maxWin;
                }
            }
            
            els.jackpotAmount.textContent = maxWin.toFixed(2);
        }

        // --- –ì–ï–ù–ï–†–ê–¶–ò–Ø –°–ï–¢–ö–ò ---
        function createGrid() {
            if (!els.grid) return;
            els.grid.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                cell.onclick = () => handleCellClick(i); 
                
                cell.innerHTML = `
                    <div class="cell-front flex flex-col items-center justify-center">
                        <i class="fas fa-question text-gray-500 text-lg"></i>
                    </div>
                    <div class="cell-back">
                        <i class="fas fa-question text-gray-500 text-lg"></i>
                    </div>
                `;
                els.grid.appendChild(cell);
            }
        }

        // --- –û–ë–ù–û–í–õ–ï–ù–ò–ï –ë–ê–õ–ê–ù–°–ê –ò –ü–û–î–ê–†–ö–û–í ---
        function updateBalanceUI() {
            if (els.balance) els.balance.textContent = balance.toFixed(2);
            if (els.giftCountDisplay) els.giftCountDisplay.textContent = gifts;
            if (els.modalGiftCount) els.modalGiftCount.textContent = gifts;
            
            if (els.tabGift) {
                if (gifts <= 0) {
                    els.tabGift.disabled = true;
                    els.tabGift.classList.remove('hover:text-white');
                    els.tabGift.classList.add('opacity-50', 'cursor-not-allowed');
                    if (currentBet.type === 'GIFT') {
                        setBetType('TON');
                    }
                } else {
                    els.tabGift.disabled = false;
                    els.tabGift.classList.add('hover:text-white');
                    els.tabGift.classList.remove('opacity-50', 'cursor-not-allowed');
                }
            }
            
            updatePotentialWin();
        }
        
        // --- –û–ë–†–ê–ë–û–¢–ö–ê –ù–ê–ñ–ê–¢–ò–Ø –ù–ê –Ø–ß–ï–ô–ö–£ ---
        function handleCellClick(index) {
            if (!isBettingOpen || currentBet.active) return; 

            const cell = document.querySelector(`.cell[data-index="${index}"]`);
            if (!cell) return;
            
            const previousCell = document.querySelector('.cell.selected');
            if (previousCell && previousCell !== cell) {
                previousCell.classList.remove('selected');
            }
            
            if (cell.classList.contains('selected')) {
                cell.classList.remove('selected');
                selectedCellIndex = null;
                if (els.betBtn) els.betBtn.disabled = true;
            } else {
                cell.classList.add('selected');
                selectedCellIndex = index;
                if (els.betBtn) els.betBtn.disabled = false;
                updatePotentialWin();
            }
            
            cell.style.transform = 'scale(0.95)';
            setTimeout(() => {
                if (cell.classList.contains('selected')) {
                    cell.style.transform = 'scale(1.02)';
                } else {
                    cell.style.transform = 'scale(1)';
                }
            }, 150);
        }

        // --- –§–£–ù–ö–¶–ò–Ø –î–õ–Ø –ü–û–ö–ê–ó–ê –û–®–ò–ë–ö–ò ---
        function showError(message) {
            if (!els.errorMessage || !els.errorText) return;
            
            els.errorText.textContent = message;
            els.errorMessage.classList.add('show');
            
            // –£–±–∏—Ä–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                els.errorMessage.classList.remove('show');
            }, 3000);
        }

        // --- –õ–û–ì–ò–ö–ê –ú–û–î–ê–õ–¨–ù–û–ì–û –û–ö–ù–ê –°–¢–ê–í–ö–ò ---
        function openBetModal() {
            if (!isBettingOpen || currentBet.active) return;
            
            // –ü–†–û–í–ï–†–ö–ê: –≤—ã–±—Ä–∞–Ω–∞ –ª–∏ —è—á–µ–π–∫–∞?
            if (selectedCellIndex === null) {
                showError('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤—ã–±–µ—Ä–∏—Ç–µ —è—á–µ–π–∫—É –¥–ª—è —Å—Ç–∞–≤–∫–∏');
                if (els.grid) {
                    els.grid.classList.add('shake');
                    setTimeout(() => els.grid.classList.remove('shake'), 400);
                }
                return;
            }
            
            if (currentBet.type === 'TON' && els.betAmountInput) {
                const defaultBet = Math.min(10, balance);
                els.betAmountInput.value = defaultBet.toFixed(2);
            }
            updateBalanceUI();
            if (els.betModal) {
                els.betModal.classList.remove('hidden');
            }
        }

        function closeBetModal() {
            if (els.betModal) {
                els.betModal.classList.add('hidden');
            }
        }

        function setBetType(type) {
            currentBet.type = type;

            if (!els.tabTon || !els.tabGift || !els.inputTon || !els.inputGift) return;

            if (type === 'TON') {
                els.tabTon.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-white', 'shadow-lg');
                els.tabTon.classList.remove('text-gray-400', 'shadow-none');
                els.tabGift.classList.remove('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-white', 'shadow-lg');
                els.tabGift.classList.add('text-gray-400', 'shadow-none');
                
                els.inputTon.classList.remove('hidden');
                els.inputGift.classList.add('hidden');
            } else { // GIFT
                els.tabGift.classList.add('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-white', 'shadow-lg');
                els.tabGift.classList.remove('text-gray-400', 'shadow-none');
                els.tabTon.classList.remove('bg-gradient-to-r', 'from-blue-600', 'to-blue-500', 'text-white', 'shadow-lg');
                els.tabTon.classList.add('text-gray-400', 'shadow-none');

                els.inputTon.classList.add('hidden');
                els.inputGift.classList.remove('hidden');
            }
            
            updatePotentialWin();
        }

        function adjustBet(amount) {
            if (currentBet.type === 'TON' && els.betAmountInput) {
                let current = parseFloat(els.betAmountInput.value) || 0;
                let newAmount = Math.min(current + amount, balance);
                els.betAmountInput.value = Math.max(0.1, newAmount).toFixed(2);
                updatePotentialWin();
                
                if (event && event.target) {
                    event.target.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        event.target.style.transform = 'scale(1)';
                    }, 150);
                }
            }
        }

        function setMaxBet() {
            if (currentBet.type === 'TON' && els.betAmountInput) {
                els.betAmountInput.value = balance.toFixed(2);
                updatePotentialWin();
                
                if (event && event.target) {
                    event.target.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        event.target.style.transform = 'scale(1)';
                    }, 150);
                }
            }
        }

        // --- –õ–û–ì–ò–ö–ê –†–ê–ó–ú–ï–©–ï–ù–ò–Ø –°–¢–ê–í–ö–ò ---
        function placeBet() {
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ–º —Å—Ç–∞–≤–∫–∏
            if (selectedCellIndex === null) {
                showError('–Ø—á–µ–π–∫–∞ –Ω–µ –≤—ã–±—Ä–∞–Ω–∞! –í—ã–±–µ—Ä–∏—Ç–µ —è—á–µ–π–∫—É –¥–ª—è —Å—Ç–∞–≤–∫–∏');
                closeBetModal();
                return;
            }
            
            if (!isBettingOpen || selectedCellIndex === null) return;
            
            let amount;
            
            if (currentBet.type === 'TON') {
                amount = parseFloat(els.betAmountInput.value);
                if (isNaN(amount) || amount < 0.1 || amount > balance) {
                    showError('–ù–µ–≤–µ—Ä–Ω–∞—è —Å—É–º–º–∞ —Å—Ç–∞–≤–∫–∏');
                    if (els.betAmountInput) {
                        els.betAmountInput.classList.add('shake');
                        setTimeout(() => els.betAmountInput.classList.remove('shake'), 400);
                    }
                    return;
                }
                balance -= amount;
            } else { // GIFT
                if (gifts <= 0) {
                    showError('–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤');
                    return;
                }
                amount = 1;
                gifts -= 1;
            }

            currentBet.active = true;
            currentBet.amount = amount;
            
            updateBalanceUI();
            closeBetModal();
            
            if (els.betBtn) {
                els.betBtn.innerHTML = `
                    <div class="flex items-center justify-center gap-3">
                        <i class="fas fa-lock text-blue-300"></i>
                        <span class="font-bold tracking-wide">–°–¢–ê–í–ö–ê –ü–†–ò–ù–Ø–¢–ê</span>
                        <i class="fas fa-check text-emerald-300"></i>
                    </div>
                `;
                els.betBtn.className = "w-full bg-gradient-to-r from-blue-900/30 to-blue-800/30 text-blue-300 font-bold py-3.5 rounded-xl border border-blue-500/30 shadow-lg shadow-blue-500/10 cursor-default text-sm mt-4 relative overflow-hidden";
            }
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach(c => {
                if (!c.classList.contains('selected')) {
                    c.classList.add('locked');
                }
            });

            const playerBet = {
                user: '–í—ã', 
                amount: currentBet.type === 'TON' ? `${amount.toFixed(2)} TON` : '1 üéÅ',
                cellIndex: selectedCellIndex,
                isPlayer: true,
                hideCell: false,
                result: null
            };
            
            mockBets.push(playerBet);
            addBetWithAnimation(playerBet, true);
        }

        // --- –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–¢–ê–í–ö–ò –° –ê–ù–ò–ú–ê–¶–ò–ï–ô ---
        function addBetWithAnimation(bet, isPlayerBet = false) {
            if (!els.otherBetsDisplay) return;
            
            const betEl = document.createElement('div');
            
            let bgClass = 'bg-gray-900/50';
            let animationClass = isPlayerBet ? 'bet-player' : 'bet-bot';
            
            if (bet.result) {
                animationClass = isPlayerBet ? 'bet-player' : 'bet-bot';
                if (bet.result.win) {
                    bgClass = 'bg-emerald-900/20 border-emerald-500/30';
                } else {
                    bgClass = 'bg-red-900/20 border-red-500/30';
                }
            } else if (!isBettingOpen && !currentBet.active) {
                bgClass = 'bg-gray-800/30 border-gray-700/50';
            }
            
            const playerClass = isPlayerBet ? 'player-bet' : '';
            betEl.className = `compact-bet ${bgClass} ${playerClass} ${animationClass}`;
            
            const cellDisplayIndex = parseInt(bet.cellIndex) + 1;
            const cellSymbol = (bet.isPlayer && !bet.hideCell) ? `–Ø—á–µ–π–∫–∞: ${cellDisplayIndex}` : ``;

            let resultBadge = '';
            if (bet.result) {
                if (bet.result.win) {
                    resultBadge = `<span class="win-badge">+${bet.result.amount.toFixed(2)}</span>`;
                } else {
                    const lossAmount = typeof bet.result.originalAmount === 'number' && bet.result.originalAmount > 0 ? 
                        bet.result.originalAmount.toFixed(2) + '' : 
                        (bet.amount.includes('üéÅ') ? '1' : '0');
                    resultBadge = `<span class="lose-badge">-${lossAmount}</span>`;
                }
            } else if (!isBettingOpen && !bet.isPlayer) {
                resultBadge = `<span class="pending-badge">...</span>`;
            }

            betEl.innerHTML = `
                <div class="flex items-center w-full">
                    <div class="user-icon rounded-lg ${bet.isPlayer ? 'bg-gradient-to-br from-blue-500/20 to-blue-600/20 text-blue-300' : 'bg-gradient-to-br from-gray-800 to-gray-900 text-gray-400'} flex items-center justify-center">
                        <i class="fas ${bet.isPlayer ? 'fa-crown' : 'fa-robot'}"></i>
                    </div>
                    <div class="user-info ml-4">
                        <div class="user-name">
                            ${bet.isPlayer ? '–í—ã' : bet.user}
                            ${resultBadge}
                        </div>
                        <div class="cell-info">${cellSymbol}</div>
                    </div>
                    <div class="bet-amount ml-auto">${bet.amount}</div>
                </div>
            `;
            
            if (bet.isPlayer) {
                els.otherBetsDisplay.prepend(betEl);
            } else {
                els.otherBetsDisplay.appendChild(betEl);
            }
            
            updateActiveBetsCount();
        }

        // --- –õ–û–ì–ò–ö–ê –ò–ì–†–û–í–û–ì–û –¶–ò–ö–õ–ê ---
        function startGameLoop() {
            resultShown = false; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Ñ–ª–∞–≥ –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–≥–æ —Ä–∞—É–Ω–¥–∞
            maxWinThisRound = 0; // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –≤—ã–∏–≥—Ä—ã—à
            
            if (els.statusText) {
                els.statusText.innerHTML = '<i class="fas fa-clock animate-pulse"></i> –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç–∞–≤–æ–∫';
            }
            if (els.timerBar) {
                els.timerBar.style.width = '100%';
            }
            if (els.timerText) {
                els.timerText.textContent = '10.0'; // –£–±—Ä–∞–ª–∏ –±—É–∫–≤—É "S"
            }
            
            isBettingOpen = true;
            
            mockBets = [];
            if (els.otherBetsDisplay) {
                els.otherBetsDisplay.innerHTML = '';
            }
            botsAdded = 0;
            
            startBotBets();
            updateActiveBetsCount();

            gameInterval = setInterval(() => {
                currentTime -= 0.1;
                
                if (currentTime <= 0) {
                    clearInterval(gameInterval);
                    clearInterval(botBetInterval);
                    endRound();
                    return;
                }
                
                if (els.timerText) {
                    // –£–±—Ä–∞–ª–∏ –±—É–∫–≤—É "S" –∏–∑ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
                    els.timerText.textContent = currentTime.toFixed(1);
                }
                if (els.timerBar) {
                    els.timerBar.style.width = `${(currentTime / ROUND_TIME) * 100}%`;
                }

                if (currentTime <= 3 && isBettingOpen) {
                    isBettingOpen = false;
                    clearInterval(botBetInterval);
                    
                    if (els.statusText) {
                        els.statusText.innerHTML = '<i class="fas fa-spinner fa-spin"></i> –†–æ–∑—ã–≥—Ä—ã—à...';
                    }
                    
                    if (els.betModal && els.betModal.classList.contains('hidden') === false) {
                        closeBetModal();
                    }
                    
                    if (!currentBet.active && els.betBtn) {
                        els.betBtn.disabled = true;
                        els.betBtn.innerHTML = `<span>–í–†–ï–ú–Ø –í–´–®–õ–û</span>`;
                        els.betBtn.className = "w-full bg-gradient-to-r from-red-900/30 to-red-800/30 text-red-300 font-bold py-3.5 rounded-xl border border-red-500/30 shadow-lg shadow-red-500/10 cursor-default text-sm mt-4";
                    }
                }
            }, 100);
        }

        // --- –ü–û–°–¢–ï–ü–ï–ù–ù–û–ï –î–û–ë–ê–í–õ–ï–ù–ò–ï –°–¢–ê–í–û–ö –ë–û–¢–û–í ---
        function startBotBets() {
            if (botBetInterval) {
                clearInterval(botBetInterval);
            }
            
            const interval = Math.random() * 2000 + 1000;
            
            botBetInterval = setInterval(() => {
                if (botsAdded >= MAX_BOTS || !isBettingOpen) {
                    clearInterval(botBetInterval);
                    return;
                }
                
                const isGift = Math.random() < 0.15 && gifts > 0;
                const amount = isGift ? '1 üéÅ' : `${(Math.random() * 50 + 1).toFixed(2)} TON`;
                const playerIndex = Math.floor(Math.random() * MOCK_PLAYERS.length);
                const playerName = MOCK_PLAYERS[playerIndex];
                const cellIndex = Math.floor(Math.random() * 9);
                
                const botBet = {
                    user: playerName,
                    amount: amount,
                    cellIndex: cellIndex,
                    isPlayer: false,
                    hideCell: true,
                    result: null
                };
                
                mockBets.push(botBet);
                botsAdded++;
                
                addBetWithAnimation(botBet, false);
            }, interval);
        }

        function endRound() {
            if (els.statusText) {
                els.statusText.innerHTML = '<i class="fas fa-chart-bar"></i> –†–µ–∑—É–ª—å—Ç–∞—Ç—ã';
            }
            if (els.timerText) {
                els.timerText.textContent = '0.0'; // –£–±—Ä–∞–ª–∏ –±—É–∫–≤—É "S"
            }
            if (els.timerBar) {
                els.timerBar.style.width = '0%';
            }
            
            isBettingOpen = false;

            if (els.betModal && els.betModal.classList.contains('hidden') === false) {
                closeBetModal();
            }

            currentRoundResultIndex = Math.floor(Math.random() * 9); 
            
            const cells = document.querySelectorAll('.cell');
            cells.forEach((cell, index) => {
                const back = cell.querySelector('.cell-back');
                
                if (back) {
                    back.innerHTML = '';
                    
                    if (index === currentRoundResultIndex) {
                        back.innerHTML = `<i class="fas fa-bomb mine"></i>`;
                    } else {
                        back.innerHTML = `<i class="fas fa-gem gem"></i>`;
                    }
                    
                    if (currentBet.active && index === selectedCellIndex) {
                        if (index === currentRoundResultIndex) {
                            cell.style.borderColor = '#f87171';
                            cell.style.boxShadow = '0 0 30px rgba(248, 113, 113, 0.4)';
                            cell.classList.add('win-particle');
                        } else {
                            cell.style.borderColor = '#34d399';
                            cell.style.boxShadow = '0 0 30px rgba(52, 211, 153, 0.4)';
                            cell.classList.add('win-particle');
                        }
                    }

                    cell.classList.remove('locked');
                    
                    // –í–°–ï —è—á–µ–π–∫–∏ –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç—Å—è, –≤–∫–ª—é—á–∞—è –≤—ã–±—Ä–∞–Ω–Ω—É—é –∏–≥—Ä–æ–∫–æ–º
                    setTimeout(() => {
                        cell.classList.add('flipped');
                    }, index * 80);
                }
            });
            
            let isWin = false;
            let winnings = 0;
            if (currentBet.active) {
                if (selectedCellIndex !== null && selectedCellIndex !== currentRoundResultIndex) {
                    isWin = true;
                    const multiplier = currentBet.type === 'TON' ? 1.45 : 1.5;
                    winnings = currentBet.amount * multiplier;
                    
                    if (currentBet.type === 'TON') {
                        balance += winnings;
                    } else {
                        balance += 15; 
                        gifts += Math.random() > 0.7 ? 1 : 0;
                    }
                    
                    if (isWin) {
                        createConfetti();
                    }
                } else {
                    isWin = false;
                }
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∂–µ–∫–ø–æ—Ç, –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤—ã–∏–≥—Ä–∞–ª
                if (isWin && winnings > parseFloat(els.jackpotAmount.textContent || 0)) {
                    els.jackpotAmount.textContent = winnings.toFixed(2);
                }
                
                updateBetResults(isWin, winnings);
                showResult(isWin, winnings);
            } else {
                updateBetResultsForAll();
            }

            setTimeout(resetGame, 5000);
        }

        // –≠—Ñ—Ñ–µ–∫—Ç –∫–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –ø–æ–±–µ–¥–µ
        function createConfetti() {
            const confettiContainer = document.getElementById('confettiContainer');
            if (!confettiContainer) return;
            
            const colors = ['#60a5fa', '#34d399', '#fbbf24', '#f87171', '#a78bfa'];
            confettiContainer.innerHTML = '';
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.cssText = `
                    position: absolute;
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    top: -20px;
                    left: ${Math.random() * 100}%;
                    border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                    animation: fall ${Math.random() * 3 + 2}s linear forwards;
                    opacity: 0.9;
                    transform: rotate(${Math.random() * 360}deg);
                `;
                confettiContainer.appendChild(confetti);
                
                setTimeout(() => {
                    if (confetti.parentNode === confettiContainer) {
                        confetti.remove();
                    }
                }, 5000);
            }
        }

        function updateBetResultsForAll() {
            mockBets.forEach(bet => {
                if (bet.result === null) {
                    const isWin = bet.cellIndex !== currentRoundResultIndex;
                    
                    let originalAmount = 0;
                    if (typeof bet.amount === 'string') {
                        if (bet.amount.includes('TON')) {
                            originalAmount = parseFloat(bet.amount);
                        } else if (bet.amount.includes('üéÅ')) {
                            originalAmount = 1;
                        }
                    }
                    
                    const winnings = isWin ? 
                        (originalAmount * (bet.amount.includes('üéÅ') ? 1.5 : 1.45)) : 
                        0;
                    
                    bet.result = {
                        win: isWin,
                        amount: winnings,
                        originalAmount: originalAmount
                    };
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∂–µ–∫–ø–æ—Ç, –µ—Å–ª–∏ –±–æ—Ç –≤—ã–∏–≥—Ä–∞–ª –±–æ–ª—å—à–µ
                    if (isWin && winnings > parseFloat(els.jackpotAmount.textContent || 0)) {
                        els.jackpotAmount.textContent = winnings.toFixed(2);
                    }
                }
            });
            
            renderOtherBetsWithResults();
        }

        function updateBetResults(isWin, winnings) {
            mockBets.forEach(bet => {
                if (bet.result === null) {
                    if (bet.isPlayer) {
                        bet.result = {
                            win: isWin,
                            amount: winnings,
                            originalAmount: bet.amount.includes('TON') ? parseFloat(bet.amount) : 1
                        };
                    } else {
                        const botWin = bet.cellIndex !== currentRoundResultIndex;
                        const originalAmount = bet.amount.includes('TON') ? parseFloat(bet.amount) : 1;
                        const botWinnings = botWin ? 
                            (originalAmount * (bet.amount.includes('üéÅ') ? 1.5 : 1.45)) : 
                            0;
                        
                        bet.result = {
                            win: botWin,
                            amount: botWinnings,
                            originalAmount: originalAmount
                        };
                        
                        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∂–µ–∫–ø–æ—Ç, –µ—Å–ª–∏ –±–æ—Ç –≤—ã–∏–≥—Ä–∞–ª –±–æ–ª—å—à–µ
                        if (botWin && botWinnings > parseFloat(els.jackpotAmount.textContent || 0)) {
                            els.jackpotAmount.textContent = botWinnings.toFixed(2);
                        }
                    }
                }
            });
            
            renderOtherBetsWithResults();
        }

        function renderOtherBetsWithResults() {
            if (!els.otherBetsDisplay) return;
            
            els.otherBetsDisplay.innerHTML = '';
            
            if (mockBets.length === 0) {
                const emptyEl = document.createElement('div');
                emptyEl.className = 'text-center py-8 text-gray-500 text-sm bg-gray-900/20 rounded-2xl border border-gray-800/50';
                emptyEl.innerHTML = '<i class="fas fa-users-slash text-2xl mb-2 block"></i>–°—Ç–∞–≤–æ–∫ –ø–æ–∫–∞ –Ω–µ—Ç';
                els.otherBetsDisplay.appendChild(emptyEl);
                return;
            }
            
            const sortedBets = mockBets.sort((a, b) => {
                if (a.isPlayer && !b.isPlayer) return -1;
                if (!a.isPlayer && b.isPlayer) return 1;
                return (parseFloat(b.amount) || 0) - (parseFloat(a.amount) || 0);
            });

            sortedBets.forEach((bet, index) => {
                setTimeout(() => {
                    addBetWithAnimation(bet, bet.isPlayer);
                }, index * 100);
            });
        }

        // --- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –†–ï–ó–£–õ–¨–¢–ê–¢–ê ---
        function showResult(isWin, amount) {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±—ã–ª–æ –ª–∏ —É–∂–µ –ø–æ–∫–∞–∑–∞–Ω–æ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
            if (resultShown) return;
            resultShown = true;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
            if (!els.resultIcon || !els.resultTitle || !els.resultSubtitle || 
                !els.resultModal || !els.resultContent) {
                console.error('Result modal elements not found');
                return;
            }
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∫–ª–∞—Å—Å—ã
            els.resultIcon.className = 'text-7xl mb-6 relative z-10';
            els.resultTitle.className = 'text-3xl font-black mb-4 relative z-10 tracking-tight';
            els.resultSubtitle.className = 'text-gray-200 font-bold text-xl bg-gradient-to-r from-gray-800/50 to-gray-900/50 py-4 px-8 rounded-2xl inline-block border border-gray-700/50 relative z-10 backdrop-blur-sm';
            
            if (isWin) {
                els.resultIcon.innerHTML = 'üéä';
                els.resultTitle.textContent = '–£–°–ü–ï–•!';
                els.resultSubtitle.innerHTML = `<div class="flex items-center justify-center gap-3">
                    <i class="fas fa-arrow-up text-emerald-400"></i>
                    <span class="text-emerald-300">+${amount.toFixed(2)} TON</span>
                    <i class="fas fa-coins text-yellow-400"></i>
                </div>`;
                els.resultIcon.classList.add('text-emerald-400');
                els.resultTitle.classList.add('text-emerald-300');
                els.resultSubtitle.classList.add('bg-gradient-to-r', 'from-emerald-900/20', 'to-green-900/20', 'border-emerald-500/30', 'text-emerald-300');
                
                if (navigator.vibrate) {
                    navigator.vibrate([100, 50, 100]);
                }
            } else {
                els.resultIcon.innerHTML = 'üí•';
                els.resultTitle.textContent = '–ú–ò–ù–ê!';
                els.resultSubtitle.innerHTML = `<div class="flex items-center justify-center gap-3">
                    <i class="fas fa-arrow-down text-red-400"></i>
                    <span class="text-red-300">${currentBet.type === 'TON' ? '-'+currentBet.amount.toFixed(2)+' TON' : '-1 –ü–æ–¥–∞—Ä–æ–∫'}</span>
                    <i class="fas fa-bomb text-red-400"></i>
                </div>`;
                els.resultIcon.classList.add('text-red-400');
                els.resultTitle.classList.add('text-red-300');
                els.resultSubtitle.classList.add('bg-gradient-to-r', 'from-red-900/20', 'to-red-900/20', 'border-red-500/30', 'text-red-300');
            }
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–∫–Ω–æ
            els.resultModal.classList.remove('opacity-0', 'pointer-events-none');
            els.resultContent.classList.remove('scale-90');

            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                els.resultModal.classList.add('opacity-0', 'pointer-events-none');
                els.resultContent.classList.add('scale-90');
            }, 3000);
        }
        
        function resetGame() {
            currentTime = ROUND_TIME;
            selectedCellIndex = null;
            currentBet.active = false;
            currentBet.amount = 0;
            maxWinThisRound = 0;
            
            createGrid();
            updateBalanceUI();
            
            if (els.betBtn) {
                els.betBtn.disabled = true;
                els.betBtn.innerHTML = `
                    <div class="flex items-center justify-center gap-3">
                        <i class="fas fa-coins text-yellow-300"></i>
                        <span class="font-bold tracking-wide">–°–î–ï–õ–ê–¢–¨ –°–¢–ê–í–ö–£</span>
                        <i class="fas fa-arrow-right"></i>
                    </div>
                `;
                els.betBtn.className = "w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 text-white font-bold py-3.5 rounded-xl shadow-xl shadow-blue-500/30 transition-all duration-300 active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100 flex items-center justify-center gap-3 text-sm mt-4 group relative overflow-hidden";
            }
            
            const gridFrame = document.querySelector('.grid-frame');
            if (gridFrame) {
                gridFrame.classList.add('new-game');
                setTimeout(() => {
                    gridFrame.classList.remove('new-game');
                }, 500);
            }
            
            startGameLoop();
        }

        // --- –ù–ê–í–ò–ì–ê–¶–ò–Ø ---
        function switchTab(tab) {
            const gameSec = document.getElementById('gameSection');
            const profSec = document.getElementById('profileSection');
            const navGame = document.getElementById('navGame');
            const navProf = document.getElementById('navProfile');
            const navSlider = document.getElementById('navSlider');

            if (!gameSec || !profSec || !navGame || !navProf || !navSlider) return;

            if (tab === 'game') {
                gameSec.classList.remove('hidden');
                profSec.classList.add('hidden');
                navGame.classList.add('active');
                navProf.classList.remove('active');
                navSlider.style.transform = 'translateX(0)';
            } else {
                gameSec.classList.add('hidden');
                profSec.classList.remove('hidden');
                navProf.classList.add('active');
                navGame.classList.remove('active');
                navSlider.style.transform = 'translateX(100%)';
            }
        }

        // --- –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ---
        init();
    </script>
</body>
</html>